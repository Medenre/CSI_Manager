<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSI Manager</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css">
    <script src="{{ url_for('static', filename='node_modules/chart.js/dist/chart.umd.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='ticket.css')}}">
</head>
    {% include 'sidebar.html' %}

    <body>

        <table class="table table-striped table-hover table align-middle">
            <thead class="table-light">
                <tr>
                    <th> Id <span class="icon-arrow">&UpArrow;</span></th>
                    <th> Utilisateurs <span class="icon-arrow">&UpArrow;</span></th>
                    <th> Localisation <span class="icon-arrow">&UpArrow;</span></th>
                    <th> Sujet <span class="icon-arrow">&UpArrow;</span></th>
                    <th> Date <span class="icon-arrow">&UpArrow;</span></th>
                    <th> Statut <span class="icon-arrow">&UpArrow;</span></th>
                    <th> Détails </th>
                </tr>
            </thead >
            <tbody>
                {% for ticket in tickets %}
                <tr>
                    <td>{{ticket.id}}</td>
                    <td>{{ticket.username}}</td>
                    <td>{{ticket.location}}</td>
                    <td>{{ticket.title}}</td>
                    <td>{{ticket.date}}</td>
                    <td>
                        {% if ticket.status == 'Ouvert' %}
                            <p class="status shipped">{{ ticket.status }}</p>
                        {% elif ticket.status == 'Clôturer' %}
                            <p class="status delivered">{{ ticket.status }}</p>
                        {% elif ticket.status == 'En cours' %}
                            <p class="status pending">{{ ticket.status }}</p>
                        {% else %}
                            <p class="status cancelled">{{ ticket.status }}</p>
                        {% endif %}
                    </td>
                    <td><a href="{{ url_for('view_ticket', ticket_id=ticket.id) }}">Voir détails</a></td>
                
                </tr>
                {% endfor %}
            </tbody>
        </table>
    
    </body>

</html>
